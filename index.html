<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cat on the wall</title>

    <!-- zimjs.com - JavaScript Canvas Framework -->
    <script type="module">
      import zim from "https://zimjs.org/cdn/016/zim_physics";

      // See Docs under Frame for FIT, FILL, FULL, and TAG
      const assets = [
        "wall.json",
        "wall.png",
        "cat1.png",
        "cat2.png",
        "bg.png",
        "title.png",
        "RandomThought.ttf",
      ];
      const path = "assets/";
      new Frame({
        scaling: FIT,
        width: 720,
        heught: 1280,
        color: interstellar,
        outerColor: dark,
        ready: ready,
        sensors: true,
        assets,
        path,
      });
      function ready() {
        // const permissionType = "devicemotion"; // or "devicemotion"
        // const ask = new PermissionAsk(init, permissionType);
        // function init(yes) {
        //   // if the user answers yes to the PermissionAsk
        //   const errorPane = new Pane("SENSOR not available", yellow);
        //   if (yes) {
        //     // use the sensors
        //     label.text =
        //       decimals(e.acceleration.x) +
        //       "," +
        //       decimals(e.acceleration.y) +
        //       "," +
        //       decimals(e.acceleration.z);
        //     S.update();
        //   } else {
        //     // answered no to PermissionAsk dialog
        //     errorPane.show();
        //   }
        // }

        start();
        function start() {
          const bg = new Pic("bg.png").sca(0.4).center();
          const title = new Pic("title.png").sca(0.3).pos(0, 50, CENTER, TOP);
          const wallAnimate = new Sprite({ json: "wall.json" })
            .sca(0.8)
            .pos(0, 100, CENTER, BOTTOM)
            .run(6);
          const startButton = new Pic("startButton.png")
            .sca(0.2)
            .center()
            .tap(() => {
              startButton.removeFrom();
              wallAnimate.removeFrom();
              new Pic("cat1.png")
                .sca(0.5)
                .pos(-10, 700, CENTER, BOTTOM)
                .addPhysics();
              new Rectangle(200, 465, orange)
                .pos(0, -10, CENTER, BOTTOM)
                .addPhysics();
              const label = new Label().center();
              F.on("deviceorientation", (e) => {
                label.text =
                  decimals(e.rotation.x) +
                  "," +
                  decimals(e.rotation.y) +
                  "," +
                  decimals(e.rotation.z);
                S.update();
              });
            });
        }
      } // end ready
    </script>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
  </head>
  <body></body>
</html>
